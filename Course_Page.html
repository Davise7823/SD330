<!doctype html>
<html lang="eng">
<head>
    <meta charset="utf-8">
    <title>FoxBooks</title>
    <link rel="stylesheet" type="text/css" href="Foxbooks.css" />
</head>
<body>
    <h1>FoxBooks</h1>
    <div id="course_selection">
        <h2>Find Your Textbooks:</h2>
        <p>Enter the CRN:</p>
        <select name="" id="CRN">
            <optgroup>
                <option value=""></option>
            </optgroup>
        </select>
        <input type="submit" value="Submit" id="btn" />
    </div>
    <h1 id="Course_Info"></h1>
    <h2 id="Book_Info1"></h2>
    <h2 id="Book_Info2"></h2>
    <script>
			courseInfo = document.getElementById("Course_Info");
			button = document.getElementById("btn");
	    		bookInfo1 = document.getElementById("Book_Info1");
	    		bookInfo2 = document.getElementById("Book_Info2");


			async function getData(){
				//try this code, if it doesn't work...
				try{
					let response = await fetch('https://davise7823.github.io/SD330/foxbooks.json'); // make a request to a JSON endpoint
					let data = await response.json(); // parse the response as JSON

					//populates the "CRN" selection list
					for (let i = 0; i < data.courses.length; i++){
						var x = document.getElementById("CRN");
						var option = document.createElement("option");
						option.text = data.courses[i].CRN;
						x.add(option);
					}

					//If one is selected display it in the course info element
					button.addEventListener("click", () => {
						selectCRN = Number(document.getElementById("CRN").value);
						
						if(selectCRN == 12054){
							courseInfo.innerHTML = data.courses[0].Name;
							bookInfo1.innerHTML = data.courses[0].Books[0].Name;
							bookInfo2.innerHTML = data.courses[0].Books[1].Name;
						}else if (selectCRN == 10016) {
							courseInfo.innerHTML = data.courses[1].Name;
							bookInfo1.innerHTML = data.courses[1].Books[0].Name;
							bookInfo2.innerHTML = data.courses[1].Books[1].Name;
							console.log(data.courses[1].Books[0].Name);
						}else if(selectCRN == 11011){
							courseInfo.innerHTML = data.courses[2].Name;
							bookInfo1.innerHTML = data.courses[2].Books[0].Name;
							bookInfo2.innerHTML = data.courses[2].Books[1].Name;
						}else if(selectCRN == 11338){
							courseInfo.innerHTML = data.courses[3].Name;
							bookInfo1.innerHTML = data.courses[3].Books[0].Name;
							bookInfo2.innerHTML = data.courses[3].Books[1].Name;
						}else if(selectCRN == 12005){
							courseInfo.innerHTML = data.courses[4].Name;
							bookInfo1.innerHTML = data.courses[4].Books[0].Name;
							bookInfo2.innerHTML = data.courses[4].Books[1].Name;
						}else if(selectCRN == 12017){
							courseInfo.innerHTML = data.courses[5].Name;
							bookInfo1.innerHTML = data.courses[5].Books[0].Name;
							bookInfo2.innerHTML = data.courses[5].Books[1].Name;
						}else if(selectCRN == 11452){
							courseInfo.innerHTML = data.courses[6].Name;
							bookInfo1.innerHTML = data.courses[6].Books[0].Name;
							bookInfo2.innerHTML = data.courses[6].Books[1].Name;
						}else if(selectCRN == 12904){
							courseInfo.innerHTML = data.courses[7].Name;
							bookInfo1.innerHTML = data.courses[7].Books[0].Name;
							bookInfo2.innerHTML = data.courses[7].Books[1].Name;
						}
					});
				}
				//run this code to show any errors
				catch (error) {
					console.error(error); // handle any errors
			  	}
			}
			getData();
    </script>
    <footer>
        <hr />
        <small>&copy Elijah D - 09/25/23</small>
    </footer>
</body>
</html>
