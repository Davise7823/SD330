<!doctype html>
<html lang="eng">
	<head>
		<meta charset="utf-8">
		<title>FoxBooks</title>
		<link rel="stylesheet" type="text/css" href="Foxbooks.css" />
	</head>
	<body>
		<h1>FoxBooks</h1>
		<div id="course_selection">
			<h2>Find Your Textbooks:</h2>
			<p>Enter the CRN:</p>
			<select name="" id="CRN">
			<optgroup label="">
					<option value="" selected="selected"></option>
			</optgroup>
			</select>
			<p>Enter the Section:</p>
			<select name="" id="Section">
			<optgroup label="">
					<option value="" selected="selected"></option>
			</optgroup>
			</select>
			<input type="submit" value="Submit" onClick="CRNSelection();" />
		</div>
		<h2 id="Course_Info"></h2>
		<script>
			selectCRN = document.getElementById("CRN").value;
			selectSection = document.getElementById("Section").value;
			courseInfo = document.getElementById("Course_Info");
			var info;

			async function getData(){
				let response = await fetch('https://davise7823.github.io/SD330/foxbooks.json'); // make a request to a JSON endpoint
				let data = await response.json(); // parse the response as JSON
				//console.log(data); // do something with the JSON data
				//return data;
				
				/*catch (error) {
					console.error(error); // handle any errors
			  	}*/

				for (let i = 0; i < data.courses.length; i++){
					var x = document.getElementById("CRN");
					var option = document.createElement("option");
					option.text = data.courses[i].CRN;
					x.add(option);
				}
				//console.log(data.courses[3].Section);
				for (let i = 0; i < data.courses.length; i++){
					var x = document.getElementById("Section");
					var option = document.createElement("option");
					option.text = data.courses[i].Section;
					x.add(option);
				}
				info = data;
			}

			getData();

			courseInfo.innerHTML = info;

			function CRNSelection(){
				switch(selectCRN){
					case 12054:
						courseInfo.innerHTML = info;
					break;
					case 10016:
						courseInfo.innerHTML = data.courses[1].Name;
					break;
					case 11011:
						courseInfo.innerHTML = data.courses[2].Name;
					break;
					case 11338:
						courseInfo.innerHTML = data.courses[3].Name;
					break;
					case 12005:
						courseInfo.innerHTML = data.courses[4].Name;
					break;
					case 12017:
						courseInfo.innerHTML = data.courses[5].Name;
					break;
					case 11452:
						courseInfo.innerHTML = data.courses[6].Name;
					break;
					case 12904:
						courseInfo.innerHTML = data.courses[7].Name;
					break;
					default:
						courseInfo.innerHTML = "";
				}
			}
			
			/*fetch("https://davise7823.github.io/SD330/foxbooks.json",{method: "GET"}).then((response) => {
				//console.log('resolved', response);
				return response.json();
			}).then(data => {
				//console.log(data.courses[3].CRN);
				for (let i = 0; i < data.courses.length; i++){
					var x = document.getElementById("CRN");
					var option = document.createElement("option");
					option.text = data.courses[i].CRN;
					x.add(option);
				}
				//console.log(data.courses[3].Section);
				for (let i = 0; i < data.courses.length; i++){
					var x = document.getElementById("Section");
					var option = document.createElement("option");
					option.text = data.courses[i].Section;
					x.add(option);
				}
			}).catch((err) => {
				console.log('rejected', err);
			})*/
		</script>
		<footer>
			<hr />
			<small>&copy Elijah D - 09/25/23</small>
		</footer>
	</body>
</html>
